# Kustomization for production overlay
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ereuna-prod

resources:
  - ../../base/namespace.yaml
  - ../../base/secrets.yaml
  - ../../base/configmaps.yaml
  - ../../base/mongodb-statefulset.yaml
  - ../../base/redis-statefulset.yaml
  - ../../base/frontend-deployment.yaml
  - ../../base/backend-deployment.yaml
  - ../../base/websocket-deployment.yaml
  - ../../base/aggregator-deployment.yaml
  - ../../base/ingestor-deployment.yaml
  - ../../base/ingress.yaml
  - ../../base/hpa.yaml
  - ../../base/network-policies.yaml
  - ../../monitoring/prometheus.yaml
  - ../../monitoring/grafana.yaml
  - ../../monitoring/loki.yaml
  - ../../monitoring/exporters.yaml

# Image tags - update these when deploying new versions
images:
  - name: your-registry/ereuna-frontend
    newTag: latest
  - name: your-registry/ereuna-backend
    newTag: latest
  - name: your-registry/ereuna-websocket
    newTag: latest
  - name: your-registry/ereuna-aggregator
    newTag: latest
  - name: your-registry/ereuna-ingestor
    newTag: latest

# Common labels
commonLabels:
  environment: production
  managed-by: kustomize

# Production-specific patches
patchesStrategicMerge:
  - replicas-patch.yaml
  - resources-patch.yaml
